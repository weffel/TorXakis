<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP, ScopedTypeVariables, TypeSynonymInstances #-}</span><span>
</span><a name="line-2"></a><span class="hs-comment">{- arch-tag: HVFS main file
Copyright (c) 2004-2011 John Goerzen &lt;jgoerzen@complete.org&gt;

All rights reserved.

For license and copyright information, see the file LICENSE
-}</span><span>
</span><a name="line-9"></a><span>
</span><a name="line-10"></a><span class="hs-comment">{- |
   Module     : System.IO.HVFS
   Copyright  : Copyright (C) 2004-2011 John Goerzen
   License    : BSD3

   Maintainer : John Goerzen &lt;jgoerzen@complete.org&gt;
   Stability  : provisional
   Portability: portable

Haskell Virtual FS -- generic support for real or virtual filesystem in Haskell

Copyright (c) 2004-2005 John Goerzen, jgoerzen\@complete.org

The idea of this module is to provide virtualization of filesystem calls.
In addition to the \&quot;real\&quot; system filesystem, you can also provide access
to other, virtual, filesystems using the same set of calls.  Examples of
such virtual filesystems might include a remote FTP server, WebDAV server,
a local Hashtable, a ConfigParser object, or any other data structure
you can represent as a tree of named nodes containing strings.

Each 'HVFS' function takes a 'HVFS' \&quot;handle\&quot; ('HVFS' instance) as its
first parameter.  If you wish to operate on the standard system filesystem,
you can just use 'SystemFS'.

The &quot;MissingH.HVFS.IO.InstanceHelpers&quot; module contains some code to help
you make your own HVFS instances.

The 'HVFSOpenable' class works together with the &quot;System.IO.HVIO&quot; module
to provide a complete virtual filesystem and I\/O model that allows you
to open up virtual filesystem files and act upon them in a manner similar
to standard Handles.
-}</span><span>
</span><a name="line-42"></a><span>
</span><a name="line-43"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span class="hs-operator">.</span><span class="hs-identifier">HVFS</span><span class="hs-special">(</span><span class="hs-comment">-- * Implementation Classes \/ Types</span><span>
</span><a name="line-44"></a><span>                        </span><a href="System.IO.HVFS.html#HVFS"><span class="hs-identifier hs-type">HVFS</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="System.IO.HVFS.html#HVFSStat"><span class="hs-identifier hs-type">HVFSStat</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-45"></a><span>                        </span><a href="System.IO.HVFS.html#HVFSOpenable"><span class="hs-identifier hs-type">HVFSOpenable</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="System.IO.HVFS.html#HVFSOpenEncap"><span class="hs-identifier hs-type">HVFSOpenEncap</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><a href="System.IO.HVFS.html#HVFSStatEncap"><span class="hs-identifier hs-type">HVFSStatEncap</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-46"></a><span>                        </span><a href="System.IO.HVFS.html#withStat"><span class="hs-identifier hs-var">withStat</span></a><span class="hs-special">,</span><span> </span><a href="System.IO.HVFS.html#withOpen"><span class="hs-identifier hs-var">withOpen</span></a><span class="hs-special">,</span><span>
</span><a name="line-47"></a><span>                        </span><a href="System.IO.HVFS.html#SystemFS"><span class="hs-identifier hs-type">SystemFS</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-48"></a><span>                        </span><span class="hs-comment">-- * Re-exported types from other modules</span><span>
</span><a name="line-49"></a><span>                        </span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">DeviceID</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">FileID</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">FileMode</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">LinkCount</span><span class="hs-special">,</span><span>
</span><a name="line-50"></a><span>                        </span><span class="hs-identifier hs-type">UserID</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">GroupID</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">FileOffset</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">EpochTime</span><span class="hs-special">,</span><span>
</span><a name="line-51"></a><span>                        </span><span class="hs-identifier hs-type">IOMode</span><span>
</span><a name="line-52"></a><span>                    </span><span class="hs-special">)</span><span>
</span><a name="line-53"></a><span class="hs-keyword">where</span><span>
</span><a name="line-54"></a><span>
</span><a name="line-55"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Exception</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">catch</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">IOException</span><span class="hs-special">)</span><span>
</span><a name="line-56"></a><span class="hs-keyword">import</span><span> </span><a href="System.IO.HVIO.html"><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span class="hs-operator">.</span><span class="hs-identifier">HVIO</span></a><span>
</span><a name="line-57"></a><span class="hs-keyword">import</span><span> </span><a href="System.Time.Utils.html"><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Time</span><span class="hs-operator">.</span><span class="hs-identifier">Utils</span></a><span>
</span><a name="line-58"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span>
</span><a name="line-59"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span class="hs-operator">.</span><span class="hs-identifier">Error</span><span>
</span><a name="line-60"></a><span class="hs-keyword">import</span><span> </span><a href="System.IO.PlafCompat.html"><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span class="hs-operator">.</span><span class="hs-identifier">PlafCompat</span></a><span>
</span><a name="line-61"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Posix</span><span class="hs-operator">.</span><span class="hs-identifier">Types</span><span>
</span><a name="line-62"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Time</span><span>
</span><a name="line-63"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Directory</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">D</span><span>
</span><a name="line-64"></a><span>
</span><a name="line-65"></a><span class="hs-cpp">#if MIN_VERSION_directory(1,2,0)</span><span>
</span><a name="line-66"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Time</span><span class="hs-operator">.</span><span class="hs-identifier">Clock</span><span class="hs-operator">.</span><span class="hs-identifier">POSIX</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-var">utcTimeToPOSIXSeconds</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-67"></a><span class="hs-cpp">#endif</span><span>
</span><a name="line-68"></a><span>
</span><a name="line-69"></a><span class="hs-comment">{- | Encapsulate a 'HVFSStat' result.  This is required due to Haskell
typing restrictions.  You can get at it with:

&gt; case encap of
&gt;    HVFSStatEncap x -&gt; -- now use x
-}</span><span>
</span><a name="line-75"></a><span class="hs-keyword">data</span><span> </span><a name="HVFSStatEncap"><a href="System.IO.HVFS.html#HVFSStatEncap"><span class="hs-identifier">HVFSStatEncap</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679057369"><a href="#local-6989586621679057369"><span class="hs-identifier">a</span></a></a><span class="hs-operator">.</span><span> </span><a href="System.IO.HVFS.html#HVFSStat"><span class="hs-identifier hs-type">HVFSStat</span></a><span> </span><a href="#local-6989586621679057369"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="HVFSStatEncap"><a href="System.IO.HVFS.html#HVFSStatEncap"><span class="hs-identifier">HVFSStatEncap</span></a></a><span> </span><a href="#local-6989586621679057369"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span class="hs-comment">{- | Convenience function for working with stat -- takes a stat result
and a function that uses it, and returns the result.

Here is an example from the HVFS source:

&gt;    vGetModificationTime fs fp =
&gt;       do s &lt;- vGetFileStatus fs fp
&gt;          return $ epochToClockTime (withStat s vModificationTime)

See 'System.Time.Utils.epochToClockTime' for more information.
-}</span><span>
</span><a name="line-88"></a><span class="hs-identifier">withStat</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679057374"><a href="#local-6989586621679057374"><span class="hs-identifier">b</span></a></a><span class="hs-operator">.</span><span> </span><a href="System.IO.HVFS.html#HVFSStatEncap"><span class="hs-identifier hs-type">HVFSStatEncap</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679057375"><a href="#local-6989586621679057375"><span class="hs-identifier">a</span></a></a><span class="hs-operator">.</span><span> </span><a href="System.IO.HVFS.html#HVFSStat"><span class="hs-identifier hs-type">HVFSStat</span></a><span> </span><a href="#local-6989586621679057375"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679057375"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057374"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057374"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-89"></a><a name="withStat"><a href="System.IO.HVFS.html#withStat"><span class="hs-identifier">withStat</span></a></a><span> </span><a name="local-6989586621679057376"><a href="#local-6989586621679057376"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679057377"><a href="#local-6989586621679057377"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-90"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679057376"><span class="hs-identifier hs-var">s</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-91"></a><span>           </span><a href="System.IO.HVFS.html#HVFSStatEncap"><span class="hs-identifier hs-var">HVFSStatEncap</span></a><span> </span><a name="local-6989586621679057378"><a href="#local-6989586621679057378"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057377"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679057378"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-92"></a><span>
</span><a name="line-93"></a><span class="hs-comment">{- | Similar to 'HVFSStatEncap', but for 'vOpen' result.
-}</span><span>
</span><a name="line-95"></a><span class="hs-keyword">data</span><span> </span><a name="HVFSOpenEncap"><a href="System.IO.HVFS.html#HVFSOpenEncap"><span class="hs-identifier">HVFSOpenEncap</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679057368"><a href="#local-6989586621679057368"><span class="hs-identifier">a</span></a></a><span class="hs-operator">.</span><span> </span><a href="System.IO.HVIO.html#HVIO"><span class="hs-identifier hs-type">HVIO</span></a><span> </span><a href="#local-6989586621679057368"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="HVFSOpenEncap"><a href="System.IO.HVFS.html#HVFSOpenEncap"><span class="hs-identifier">HVFSOpenEncap</span></a></a><span> </span><a href="#local-6989586621679057368"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-96"></a><span>
</span><a name="line-97"></a><span class="hs-comment">{- | Similar to 'withStat', but for the 'vOpen' result. -}</span><span>
</span><a name="line-98"></a><span class="hs-identifier">withOpen</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679057372"><a href="#local-6989586621679057372"><span class="hs-identifier">b</span></a></a><span class="hs-operator">.</span><span> </span><a href="System.IO.HVFS.html#HVFSOpenEncap"><span class="hs-identifier hs-type">HVFSOpenEncap</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679057373"><a href="#local-6989586621679057373"><span class="hs-identifier">a</span></a></a><span class="hs-operator">.</span><span> </span><a href="System.IO.HVIO.html#HVIO"><span class="hs-identifier hs-type">HVIO</span></a><span> </span><a href="#local-6989586621679057373"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679057373"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057372"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057372"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-99"></a><a name="withOpen"><a href="System.IO.HVFS.html#withOpen"><span class="hs-identifier">withOpen</span></a></a><span> </span><a name="local-6989586621679057379"><a href="#local-6989586621679057379"><span class="hs-identifier">s</span></a></a><span> </span><a name="local-6989586621679057380"><a href="#local-6989586621679057380"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-100"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679057379"><span class="hs-identifier hs-var">s</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-101"></a><span>           </span><a href="System.IO.HVFS.html#HVFSOpenEncap"><span class="hs-identifier hs-var">HVFSOpenEncap</span></a><span> </span><a name="local-6989586621679057381"><a href="#local-6989586621679057381"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679057380"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679057381"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-102"></a><span>
</span><a name="line-103"></a><span class="hs-comment">{- | Evaluating types of files and information about them.

This corresponds to the System.Posix.Types.FileStatus type, and indeed,
that is one instance of this class.

Inplementators must, at minimum, implement 'vIsDirectory' and
'vIsRegularFile'.

Default implementations of everything else are provided, returning
reasonable values.

A default implementation of this is not currently present on Windows.
-}</span><span>
</span><a name="line-116"></a><span>
</span><a name="line-117"></a><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="HVFSStat"><a href="System.IO.HVFS.html#HVFSStat"><span class="hs-identifier">HVFSStat</span></a></a><span> </span><a name="local-6989586621679057366"><a href="#local-6989586621679057366"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-118"></a><span>    </span><span class="hs-identifier">vDeviceID</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">DeviceID</span><span>
</span><a name="line-119"></a><span>    </span><span class="hs-identifier">vFileID</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FileID</span><span>
</span><a name="line-120"></a><span>
</span><a name="line-121"></a><span>    </span><span class="hs-comment">{- | Refers to file permissions, NOT the st_mode field from stat(2) -}</span><span>
</span><a name="line-122"></a><span>    </span><span class="hs-identifier">vFileMode</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FileMode</span><span>
</span><a name="line-123"></a><span>
</span><a name="line-124"></a><span>    </span><span class="hs-identifier">vLinkCount</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">LinkCount</span><span>
</span><a name="line-125"></a><span>    </span><span class="hs-identifier">vFileOwner</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">UserID</span><span>
</span><a name="line-126"></a><span>    </span><span class="hs-identifier">vFileGroup</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">GroupID</span><span>
</span><a name="line-127"></a><span>
</span><a name="line-128"></a><span>    </span><span class="hs-identifier">vSpecialDeviceID</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">DeviceID</span><span>
</span><a name="line-129"></a><span>    </span><span class="hs-identifier">vFileSize</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FileOffset</span><span>
</span><a name="line-130"></a><span>    </span><span class="hs-identifier">vAccessTime</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">EpochTime</span><span>
</span><a name="line-131"></a><span>    </span><span class="hs-identifier">vModificationTime</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">EpochTime</span><span>
</span><a name="line-132"></a><span>    </span><span class="hs-identifier">vStatusChangeTime</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">EpochTime</span><span>
</span><a name="line-133"></a><span>    </span><span class="hs-identifier">vIsBlockDevice</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-134"></a><span>    </span><span class="hs-identifier">vIsCharacterDevice</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-135"></a><span>    </span><span class="hs-identifier">vIsNamedPipe</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-136"></a><span>    </span><span class="hs-identifier">vIsRegularFile</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-137"></a><span>    </span><span class="hs-identifier">vIsDirectory</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-138"></a><span>    </span><span class="hs-identifier">vIsSymbolicLink</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-139"></a><span>    </span><span class="hs-identifier">vIsSocket</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057366"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-140"></a><span>
</span><a name="line-141"></a><span>    </span><a name="local-8214565720323832214"><a href="System.IO.HVFS.html#vDeviceID"><span class="hs-identifier">vDeviceID</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-142"></a><span>    </span><a name="local-8214565720323832215"><a href="System.IO.HVFS.html#vFileID"><span class="hs-identifier">vFileID</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-143"></a><span>    </span><a name="local-8214565720323832216"><a href="System.IO.HVFS.html#vFileMode"><span class="hs-identifier">vFileMode</span></a></a><span> </span><a name="local-6989586621679057367"><a href="#local-6989586621679057367"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="System.IO.HVFS.html#vIsDirectory"><span class="hs-identifier hs-var">vIsDirectory</span></a><span> </span><a href="#local-6989586621679057367"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-number">0x755</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-number">0o0644</span><span>
</span><a name="line-144"></a><span>    </span><a name="local-8214565720323832217"><a href="System.IO.HVFS.html#vLinkCount"><span class="hs-identifier">vLinkCount</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">1</span><span>
</span><a name="line-145"></a><span>    </span><a name="local-8214565720323832218"><a href="System.IO.HVFS.html#vFileOwner"><span class="hs-identifier">vFileOwner</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-146"></a><span>    </span><a name="local-8214565720323832219"><a href="System.IO.HVFS.html#vFileGroup"><span class="hs-identifier">vFileGroup</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-147"></a><span>    </span><a name="local-8214565720323832220"><a href="System.IO.HVFS.html#vSpecialDeviceID"><span class="hs-identifier">vSpecialDeviceID</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-148"></a><span>    </span><a name="local-8214565720323832221"><a href="System.IO.HVFS.html#vFileSize"><span class="hs-identifier">vFileSize</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-149"></a><span>    </span><a name="local-8214565720323832222"><a href="System.IO.HVFS.html#vAccessTime"><span class="hs-identifier">vAccessTime</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-150"></a><span>    </span><a name="local-8214565720323832223"><a href="System.IO.HVFS.html#vModificationTime"><span class="hs-identifier">vModificationTime</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-151"></a><span>    </span><a name="local-8214565720323832224"><a href="System.IO.HVFS.html#vStatusChangeTime"><span class="hs-identifier">vStatusChangeTime</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-number">0</span><span>
</span><a name="line-152"></a><span>    </span><a name="local-8214565720323832225"><a href="System.IO.HVFS.html#vIsBlockDevice"><span class="hs-identifier">vIsBlockDevice</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-153"></a><span>    </span><a name="local-8214565720323832226"><a href="System.IO.HVFS.html#vIsCharacterDevice"><span class="hs-identifier">vIsCharacterDevice</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-154"></a><span>    </span><a name="local-8214565720323832227"><a href="System.IO.HVFS.html#vIsNamedPipe"><span class="hs-identifier">vIsNamedPipe</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-155"></a><span>    </span><a name="local-8214565720323832230"><a href="System.IO.HVFS.html#vIsSymbolicLink"><span class="hs-identifier">vIsSymbolicLink</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-156"></a><span>    </span><a name="local-8214565720323832231"><a href="System.IO.HVFS.html#vIsSocket"><span class="hs-identifier">vIsSocket</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-157"></a><span>
</span><a name="line-158"></a><span class="hs-comment">{- | The main HVFS class.

Default implementations of these functions are provided:

 * 'vGetModificationTime' -- implemented in terms of 'vGetFileStatus'

 * 'vRaiseError'

 * 'vDoesFileExist' -- implemented in terms of 'vGetFileStatus'

 * 'vDoesDirectoryExist' -- implemented in terms of 'vGetFileStatus'

 * 'vDoesExist' -- implemented in terms of 'vGetSymbolicLinkStatus'

 * 'vGetSymbolicLinkStatus' -- set to call 'vGetFileStatus'.

Default implementations of all other functions
will generate an isIllegalOperation error, since they are assumed to be
un-implemented.

You should always provide at least a 'vGetFileStatus' call, and almost
certainly several of the others.

Most of these functions correspond to functions in System.Directory or
System.Posix.Files.  Please see detailed documentation on them there.
 -}</span><span>
</span><a name="line-184"></a><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="HVFS"><a href="System.IO.HVFS.html#HVFS"><span class="hs-identifier">HVFS</span></a></a><span> </span><a name="local-6989586621679057338"><a href="#local-6989586621679057338"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-185"></a><span>    </span><span class="hs-identifier">vGetCurrentDirectory</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-186"></a><span>    </span><span class="hs-identifier">vSetCurrentDirectory</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-187"></a><span>    </span><span class="hs-identifier">vGetDirectoryContents</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">]</span><span>
</span><a name="line-188"></a><span>    </span><span class="hs-identifier">vDoesFileExist</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-189"></a><span>    </span><span class="hs-identifier">vDoesDirectoryExist</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-190"></a><span>    </span><span class="hs-comment">{- | True if the file exists, regardless of what type it is.
       This is even True if the given path is a broken symlink. -}</span><span>
</span><a name="line-192"></a><span>    </span><span class="hs-identifier">vDoesExist</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-193"></a><span>    </span><span class="hs-identifier">vCreateDirectory</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-194"></a><span>    </span><span class="hs-identifier">vRemoveDirectory</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-195"></a><span>    </span><span class="hs-identifier">vRenameDirectory</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-196"></a><span>    </span><span class="hs-identifier">vRemoveFile</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-197"></a><span>    </span><span class="hs-identifier">vRenameFile</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-198"></a><span>    </span><span class="hs-identifier">vGetFileStatus</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="System.IO.HVFS.html#HVFSStatEncap"><span class="hs-identifier hs-type">HVFSStatEncap</span></a><span>
</span><a name="line-199"></a><span>    </span><span class="hs-identifier">vGetSymbolicLinkStatus</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="System.IO.HVFS.html#HVFSStatEncap"><span class="hs-identifier hs-type">HVFSStatEncap</span></a><span>
</span><a name="line-200"></a><span>    </span><span class="hs-identifier">vGetModificationTime</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">ClockTime</span><span>
</span><a name="line-201"></a><span>    </span><span class="hs-comment">{- | Raise an error relating to actions on this class. -}</span><span>
</span><a name="line-202"></a><span>    </span><span class="hs-identifier">vRaiseError</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IOErrorType</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679057339"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-203"></a><span>    </span><span class="hs-identifier">vCreateSymbolicLink</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-204"></a><span>    </span><span class="hs-identifier">vReadSymbolicLink</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-205"></a><span>    </span><span class="hs-identifier">vCreateLink</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057338"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-206"></a><span>
</span><a name="line-207"></a><span>    </span><a name="local-8214565720323832208"><a href="System.IO.HVFS.html#vGetModificationTime"><span class="hs-identifier">vGetModificationTime</span></a></a><span> </span><a name="local-6989586621679057340"><a href="#local-6989586621679057340"><span class="hs-identifier">fs</span></a></a><span> </span><a name="local-6989586621679057341"><a href="#local-6989586621679057341"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-208"></a><span>        </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679057342"><a href="#local-6989586621679057342"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="System.IO.HVFS.html#vGetFileStatus"><span class="hs-identifier hs-var">vGetFileStatus</span></a><span> </span><a href="#local-6989586621679057340"><span class="hs-identifier hs-var">fs</span></a><span> </span><a href="#local-6989586621679057341"><span class="hs-identifier hs-var">fp</span></a><span>
</span><a name="line-209"></a><span>           </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="System.Time.Utils.html#epochToClockTime"><span class="hs-identifier hs-var">epochToClockTime</span></a><span> </span><span class="hs-special">(</span><a href="System.IO.HVFS.html#withStat"><span class="hs-identifier hs-var">withStat</span></a><span> </span><a href="#local-6989586621679057342"><span class="hs-identifier hs-var">s</span></a><span> </span><a href="System.IO.HVFS.html#vModificationTime"><span class="hs-identifier hs-var">vModificationTime</span></a><span class="hs-special">)</span><span>
</span><a name="line-210"></a><span>    </span><a name="local-8214565720323832209"><a href="System.IO.HVFS.html#vRaiseError"><span class="hs-identifier">vRaiseError</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679057343"><a href="#local-6989586621679057343"><span class="hs-identifier">et</span></a></a><span> </span><a name="local-6989586621679057344"><a href="#local-6989586621679057344"><span class="hs-identifier">desc</span></a></a><span> </span><a name="local-6989586621679057345"><a href="#local-6989586621679057345"><span class="hs-identifier">mfp</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-211"></a><span>        </span><span class="hs-identifier hs-var">ioError</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">mkIOError</span><span> </span><a href="#local-6989586621679057343"><span class="hs-identifier hs-var">et</span></a><span> </span><a href="#local-6989586621679057344"><span class="hs-identifier hs-var">desc</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><a href="#local-6989586621679057345"><span class="hs-identifier hs-var">mfp</span></a><span>
</span><a name="line-212"></a><span>
</span><a name="line-213"></a><span>    </span><a name="local-8214565720323832195"><a href="System.IO.HVFS.html#vGetCurrentDirectory"><span class="hs-identifier">vGetCurrentDirectory</span></a></a><span> </span><a name="local-6989586621679057346"><a href="#local-6989586621679057346"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057346"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vGetCurrentDirectory&quot;</span><span>
</span><a name="line-214"></a><span>    </span><a name="local-8214565720323832196"><a href="System.IO.HVFS.html#vSetCurrentDirectory"><span class="hs-identifier">vSetCurrentDirectory</span></a></a><span> </span><a name="local-6989586621679057347"><a href="#local-6989586621679057347"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057347"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vSetCurrentDirectory&quot;</span><span>
</span><a name="line-215"></a><span>    </span><a name="local-8214565720323832197"><a href="System.IO.HVFS.html#vGetDirectoryContents"><span class="hs-identifier">vGetDirectoryContents</span></a></a><span> </span><a name="local-6989586621679057348"><a href="#local-6989586621679057348"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057348"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vGetDirectoryContents&quot;</span><span>
</span><a name="line-216"></a><span>    </span><a name="local-8214565720323832198"><a href="System.IO.HVFS.html#vDoesFileExist"><span class="hs-identifier">vDoesFileExist</span></a></a><span> </span><a name="local-6989586621679057349"><a href="#local-6989586621679057349"><span class="hs-identifier">fs</span></a></a><span> </span><a name="local-6989586621679057350"><a href="#local-6989586621679057350"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-217"></a><span>        </span><span class="hs-identifier hs-var">Control</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">Exception</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">catch</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679057351"><a href="#local-6989586621679057351"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="System.IO.HVFS.html#vGetFileStatus"><span class="hs-identifier hs-var">vGetFileStatus</span></a><span> </span><a href="#local-6989586621679057349"><span class="hs-identifier hs-var">fs</span></a><span> </span><a href="#local-6989586621679057350"><span class="hs-identifier hs-var">fp</span></a><span>
</span><a name="line-218"></a><span>                                    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="System.IO.HVFS.html#withStat"><span class="hs-identifier hs-var">withStat</span></a><span> </span><a href="#local-6989586621679057351"><span class="hs-identifier hs-var">s</span></a><span> </span><a href="System.IO.HVFS.html#vIsRegularFile"><span class="hs-identifier hs-var">vIsRegularFile</span></a><span>
</span><a name="line-219"></a><span>              </span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Control</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Exception</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">IOException</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">)</span><span>
</span><a name="line-220"></a><span>    </span><a name="local-8214565720323832199"><a href="System.IO.HVFS.html#vDoesDirectoryExist"><span class="hs-identifier">vDoesDirectoryExist</span></a></a><span> </span><a name="local-6989586621679057352"><a href="#local-6989586621679057352"><span class="hs-identifier">fs</span></a></a><span> </span><a name="local-6989586621679057353"><a href="#local-6989586621679057353"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-221"></a><span>        </span><span class="hs-identifier hs-var">Control</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">Exception</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">catch</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679057354"><a href="#local-6989586621679057354"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="System.IO.HVFS.html#vGetFileStatus"><span class="hs-identifier hs-var">vGetFileStatus</span></a><span> </span><a href="#local-6989586621679057352"><span class="hs-identifier hs-var">fs</span></a><span> </span><a href="#local-6989586621679057353"><span class="hs-identifier hs-var">fp</span></a><span>
</span><a name="line-222"></a><span>                                    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="System.IO.HVFS.html#withStat"><span class="hs-identifier hs-var">withStat</span></a><span> </span><a href="#local-6989586621679057354"><span class="hs-identifier hs-var">s</span></a><span> </span><a href="System.IO.HVFS.html#vIsDirectory"><span class="hs-identifier hs-var">vIsDirectory</span></a><span>
</span><a name="line-223"></a><span>              </span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Control</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Exception</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">IOException</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">)</span><span>
</span><a name="line-224"></a><span>    </span><a name="local-8214565720323832200"><a href="System.IO.HVFS.html#vDoesExist"><span class="hs-identifier">vDoesExist</span></a></a><span> </span><a name="local-6989586621679057355"><a href="#local-6989586621679057355"><span class="hs-identifier">fs</span></a></a><span> </span><a name="local-6989586621679057356"><a href="#local-6989586621679057356"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-225"></a><span>        </span><span class="hs-identifier hs-var">Control</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">Exception</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">catch</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679057357"><a href="#local-6989586621679057357"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="System.IO.HVFS.html#vGetSymbolicLinkStatus"><span class="hs-identifier hs-var">vGetSymbolicLinkStatus</span></a><span> </span><a href="#local-6989586621679057355"><span class="hs-identifier hs-var">fs</span></a><span> </span><a href="#local-6989586621679057356"><span class="hs-identifier hs-var">fp</span></a><span>
</span><a name="line-226"></a><span>                                    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-227"></a><span>              </span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Control</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Exception</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">IOException</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">False</span><span class="hs-special">)</span><span>
</span><a name="line-228"></a><span>    </span><a name="local-8214565720323832201"><a href="System.IO.HVFS.html#vCreateDirectory"><span class="hs-identifier">vCreateDirectory</span></a></a><span> </span><a name="local-6989586621679057358"><a href="#local-6989586621679057358"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057358"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vCreateDirectory&quot;</span><span>
</span><a name="line-229"></a><span>    </span><a name="local-8214565720323832202"><a href="System.IO.HVFS.html#vRemoveDirectory"><span class="hs-identifier">vRemoveDirectory</span></a></a><span> </span><a name="local-6989586621679057359"><a href="#local-6989586621679057359"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057359"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vRemoveDirectory&quot;</span><span>
</span><a name="line-230"></a><span>    </span><a name="local-8214565720323832204"><a href="System.IO.HVFS.html#vRemoveFile"><span class="hs-identifier">vRemoveFile</span></a></a><span> </span><a name="local-6989586621679057360"><a href="#local-6989586621679057360"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057360"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vRemoveFile&quot;</span><span>
</span><a name="line-231"></a><span>    </span><a name="local-8214565720323832205"><a href="System.IO.HVFS.html#vRenameFile"><span class="hs-identifier">vRenameFile</span></a></a><span> </span><a name="local-6989586621679057361"><a href="#local-6989586621679057361"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057361"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vRenameFile&quot;</span><span>
</span><a name="line-232"></a><span>    </span><a name="local-8214565720323832203"><a href="System.IO.HVFS.html#vRenameDirectory"><span class="hs-identifier">vRenameDirectory</span></a></a><span> </span><a name="local-6989586621679057362"><a href="#local-6989586621679057362"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057362"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vRenameDirectory&quot;</span><span>
</span><a name="line-233"></a><span>    </span><a name="local-8214565720323832210"><a href="System.IO.HVFS.html#vCreateSymbolicLink"><span class="hs-identifier">vCreateSymbolicLink</span></a></a><span> </span><a name="local-6989586621679057363"><a href="#local-6989586621679057363"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057363"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vCreateSymbolicLink&quot;</span><span>
</span><a name="line-234"></a><span>    </span><a name="local-8214565720323832211"><a href="System.IO.HVFS.html#vReadSymbolicLink"><span class="hs-identifier">vReadSymbolicLink</span></a></a><span> </span><a name="local-6989586621679057364"><a href="#local-6989586621679057364"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057364"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vReadSymbolicLink&quot;</span><span>
</span><a name="line-235"></a><span>    </span><a name="local-8214565720323832212"><a href="System.IO.HVFS.html#vCreateLink"><span class="hs-identifier">vCreateLink</span></a></a><span> </span><a name="local-6989586621679057365"><a href="#local-6989586621679057365"><span class="hs-identifier">fs</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#eh"><span class="hs-identifier hs-var">eh</span></a><span> </span><a href="#local-6989586621679057365"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-string">&quot;vCreateLink&quot;</span><span>
</span><a name="line-236"></a><span>    </span><a name="local-8214565720323832207"><a href="System.IO.HVFS.html#vGetSymbolicLinkStatus"><span class="hs-identifier">vGetSymbolicLinkStatus</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#vGetFileStatus"><span class="hs-identifier hs-var">vGetFileStatus</span></a><span>
</span><a name="line-237"></a><span>
</span><a name="line-238"></a><span class="hs-comment">-- | Error handler helper</span><span>
</span><a name="line-239"></a><span class="hs-identifier">eh</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="System.IO.HVFS.html#HVFS"><span class="hs-identifier hs-type">HVFS</span></a><span> </span><a href="#local-6989586621679057370"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679057370"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679057371"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-240"></a><a name="eh"><a href="System.IO.HVFS.html#eh"><span class="hs-identifier">eh</span></a></a><span> </span><a name="local-6989586621679057382"><a href="#local-6989586621679057382"><span class="hs-identifier">fs</span></a></a><span> </span><a name="local-6989586621679057383"><a href="#local-6989586621679057383"><span class="hs-identifier">desc</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#vRaiseError"><span class="hs-identifier hs-var">vRaiseError</span></a><span> </span><a href="#local-6989586621679057382"><span class="hs-identifier hs-var">fs</span></a><span> </span><span class="hs-identifier hs-var">illegalOperationErrorType</span><span>
</span><a name="line-241"></a><span>             </span><span class="hs-special">(</span><a href="#local-6989586621679057383"><span class="hs-identifier hs-var">desc</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot; is not implemented in this HVFS class&quot;</span><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-242"></a><span>
</span><a name="line-243"></a><span class="hs-comment">{- | Types that can open a HVIO object should be instances of this class.
You need only implement 'vOpen'. -}</span><span>
</span><a name="line-245"></a><span>
</span><a name="line-246"></a><span class="hs-keyword">class</span><span> </span><a href="System.IO.HVFS.html#HVFS"><span class="hs-identifier hs-type">HVFS</span></a><span> </span><a href="#local-6989586621679057328"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="HVFSOpenable"><a href="System.IO.HVFS.html#HVFSOpenable"><span class="hs-identifier">HVFSOpenable</span></a></a><span> </span><a name="local-6989586621679057328"><a href="#local-6989586621679057328"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-247"></a><span>    </span><span class="hs-identifier">vOpen</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057328"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IOMode</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="System.IO.HVFS.html#HVFSOpenEncap"><span class="hs-identifier hs-type">HVFSOpenEncap</span></a><span>
</span><a name="line-248"></a><span>    </span><span class="hs-identifier">vReadFile</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057328"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-249"></a><span>    </span><span class="hs-identifier">vWriteFile</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057328"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-250"></a><span>    </span><span class="hs-identifier">vOpenBinaryFile</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679057328"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IOMode</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="System.IO.HVFS.html#HVFSOpenEncap"><span class="hs-identifier hs-type">HVFSOpenEncap</span></a><span>
</span><a name="line-251"></a><span>
</span><a name="line-252"></a><span>    </span><a name="local-8214565720323832191"><a href="System.IO.HVFS.html#vReadFile"><span class="hs-identifier">vReadFile</span></a></a><span> </span><a name="local-6989586621679057329"><a href="#local-6989586621679057329"><span class="hs-identifier">h</span></a></a><span> </span><a name="local-6989586621679057330"><a href="#local-6989586621679057330"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-253"></a><span>        </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679057331"><a href="#local-6989586621679057331"><span class="hs-identifier">oe</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="System.IO.HVFS.html#vOpen"><span class="hs-identifier hs-var">vOpen</span></a><span> </span><a href="#local-6989586621679057329"><span class="hs-identifier hs-var">h</span></a><span> </span><a href="#local-6989586621679057330"><span class="hs-identifier hs-var">fp</span></a><span> </span><span class="hs-identifier hs-var">ReadMode</span><span>
</span><a name="line-254"></a><span>           </span><a href="System.IO.HVFS.html#withOpen"><span class="hs-identifier hs-var">withOpen</span></a><span> </span><a href="#local-6989586621679057331"><span class="hs-identifier hs-var">oe</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679057332"><a href="#local-6989586621679057332"><span class="hs-identifier">fh</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="System.IO.HVIO.html#vGetContents"><span class="hs-identifier hs-var">vGetContents</span></a><span> </span><a href="#local-6989586621679057332"><span class="hs-identifier hs-var">fh</span></a><span class="hs-special">)</span><span>
</span><a name="line-255"></a><span>
</span><a name="line-256"></a><span>    </span><a name="local-8214565720323832192"><a href="System.IO.HVFS.html#vWriteFile"><span class="hs-identifier">vWriteFile</span></a></a><span> </span><a name="local-6989586621679057333"><a href="#local-6989586621679057333"><span class="hs-identifier">h</span></a></a><span> </span><a name="local-6989586621679057334"><a href="#local-6989586621679057334"><span class="hs-identifier">fp</span></a></a><span> </span><a name="local-6989586621679057335"><a href="#local-6989586621679057335"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-257"></a><span>        </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679057336"><a href="#local-6989586621679057336"><span class="hs-identifier">oe</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="System.IO.HVFS.html#vOpen"><span class="hs-identifier hs-var">vOpen</span></a><span> </span><a href="#local-6989586621679057333"><span class="hs-identifier hs-var">h</span></a><span> </span><a href="#local-6989586621679057334"><span class="hs-identifier hs-var">fp</span></a><span> </span><span class="hs-identifier hs-var">WriteMode</span><span>
</span><a name="line-258"></a><span>           </span><a href="System.IO.HVFS.html#withOpen"><span class="hs-identifier hs-var">withOpen</span></a><span> </span><a href="#local-6989586621679057336"><span class="hs-identifier hs-var">oe</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679057337"><a href="#local-6989586621679057337"><span class="hs-identifier">fh</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><a href="System.IO.HVIO.html#vPutStr"><span class="hs-identifier hs-var">vPutStr</span></a><span> </span><a href="#local-6989586621679057337"><span class="hs-identifier hs-var">fh</span></a><span> </span><a href="#local-6989586621679057335"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-259"></a><span>                                  </span><a href="System.IO.HVIO.html#vClose"><span class="hs-identifier hs-var">vClose</span></a><span> </span><a href="#local-6989586621679057337"><span class="hs-identifier hs-var">fh</span></a><span class="hs-special">)</span><span>
</span><a name="line-260"></a><span>
</span><a name="line-261"></a><span>    </span><span class="hs-comment">-- | Open a file in binary mode.</span><span>
</span><a name="line-262"></a><span>    </span><a name="local-8214565720323832193"><a href="System.IO.HVFS.html#vOpenBinaryFile"><span class="hs-identifier">vOpenBinaryFile</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="System.IO.HVFS.html#vOpen"><span class="hs-identifier hs-var">vOpen</span></a><span>
</span><a name="line-263"></a><span>
</span><a name="line-264"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><span class="hs-identifier hs-type">FileStatus</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-265"></a><span>    </span><a name="local-8214565720323784721"><span class="hs-identifier">show</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;&lt;FileStatus&gt;&quot;</span><span>
</span><a name="line-266"></a><span>
</span><a name="line-267"></a><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><a name="line-268"></a><span class="hs-comment">-- Standard implementations</span><span>
</span><a name="line-269"></a><span class="hs-comment">----------------------------------------------------------------------</span><span>
</span><a name="line-270"></a><span class="hs-keyword">instance</span><span> </span><a href="System.IO.HVFS.html#HVFSStat"><span class="hs-identifier hs-type">HVFSStat</span></a><span> </span><span class="hs-identifier hs-type">FileStatus</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-271"></a><span>    </span><a name="local-8214565720323832214"><a href="System.IO.HVFS.html#vDeviceID"><span class="hs-identifier">vDeviceID</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">deviceID</span><span>
</span><a name="line-272"></a><span>    </span><a name="local-8214565720323832215"><a href="System.IO.HVFS.html#vFileID"><span class="hs-identifier">vFileID</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fileID</span><span>
</span><a name="line-273"></a><span>    </span><a name="local-8214565720323832216"><a href="System.IO.HVFS.html#vFileMode"><span class="hs-identifier">vFileMode</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fileMode</span><span>
</span><a name="line-274"></a><span>    </span><a name="local-8214565720323832217"><a href="System.IO.HVFS.html#vLinkCount"><span class="hs-identifier">vLinkCount</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">linkCount</span><span>
</span><a name="line-275"></a><span>    </span><a name="local-8214565720323832218"><a href="System.IO.HVFS.html#vFileOwner"><span class="hs-identifier">vFileOwner</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fileOwner</span><span>
</span><a name="line-276"></a><span>    </span><a name="local-8214565720323832219"><a href="System.IO.HVFS.html#vFileGroup"><span class="hs-identifier">vFileGroup</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fileGroup</span><span>
</span><a name="line-277"></a><span>    </span><a name="local-8214565720323832220"><a href="System.IO.HVFS.html#vSpecialDeviceID"><span class="hs-identifier">vSpecialDeviceID</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">specialDeviceID</span><span>
</span><a name="line-278"></a><span>    </span><a name="local-8214565720323832221"><a href="System.IO.HVFS.html#vFileSize"><span class="hs-identifier">vFileSize</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fileSize</span><span>
</span><a name="line-279"></a><span>    </span><a name="local-8214565720323832222"><a href="System.IO.HVFS.html#vAccessTime"><span class="hs-identifier">vAccessTime</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">accessTime</span><span>
</span><a name="line-280"></a><span>    </span><a name="local-8214565720323832223"><a href="System.IO.HVFS.html#vModificationTime"><span class="hs-identifier">vModificationTime</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">modificationTime</span><span>
</span><a name="line-281"></a><span>    </span><a name="local-8214565720323832224"><a href="System.IO.HVFS.html#vStatusChangeTime"><span class="hs-identifier">vStatusChangeTime</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">statusChangeTime</span><span>
</span><a name="line-282"></a><span>    </span><a name="local-8214565720323832225"><a href="System.IO.HVFS.html#vIsBlockDevice"><span class="hs-identifier">vIsBlockDevice</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isBlockDevice</span><span>
</span><a name="line-283"></a><span>    </span><a name="local-8214565720323832226"><a href="System.IO.HVFS.html#vIsCharacterDevice"><span class="hs-identifier">vIsCharacterDevice</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isCharacterDevice</span><span>
</span><a name="line-284"></a><span>    </span><a name="local-8214565720323832227"><a href="System.IO.HVFS.html#vIsNamedPipe"><span class="hs-identifier">vIsNamedPipe</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isNamedPipe</span><span>
</span><a name="line-285"></a><span>    </span><a name="local-8214565720323832228"><a href="System.IO.HVFS.html#vIsRegularFile"><span class="hs-identifier">vIsRegularFile</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isRegularFile</span><span>
</span><a name="line-286"></a><span>    </span><a name="local-8214565720323832229"><a href="System.IO.HVFS.html#vIsDirectory"><span class="hs-identifier">vIsDirectory</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isDirectory</span><span>
</span><a name="line-287"></a><span>    </span><a name="local-8214565720323832230"><a href="System.IO.HVFS.html#vIsSymbolicLink"><span class="hs-identifier">vIsSymbolicLink</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isSymbolicLink</span><span>
</span><a name="line-288"></a><span>    </span><a name="local-8214565720323832231"><a href="System.IO.HVFS.html#vIsSocket"><span class="hs-identifier">vIsSocket</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">isSocket</span><span>
</span><a name="line-289"></a><span>
</span><a name="line-290"></a><span class="hs-keyword">data</span><span> </span><a name="SystemFS"><a href="System.IO.HVFS.html#SystemFS"><span class="hs-identifier">SystemFS</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="SystemFS"><a href="System.IO.HVFS.html#SystemFS"><span class="hs-identifier">SystemFS</span></a></a><span>
</span><a name="line-291"></a><span>              </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-292"></a><span>
</span><a name="line-293"></a><span class="hs-keyword">instance</span><span> </span><a href="System.IO.HVFS.html#HVFS"><span class="hs-identifier hs-type">HVFS</span></a><span> </span><a href="System.IO.HVFS.html#SystemFS"><span class="hs-identifier hs-type">SystemFS</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-294"></a><span>    </span><a name="local-8214565720323832195"><a href="System.IO.HVFS.html#vGetCurrentDirectory"><span class="hs-identifier">vGetCurrentDirectory</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">getCurrentDirectory</span><span>
</span><a name="line-295"></a><span>    </span><a name="local-8214565720323832196"><a href="System.IO.HVFS.html#vSetCurrentDirectory"><span class="hs-identifier">vSetCurrentDirectory</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">setCurrentDirectory</span><span>
</span><a name="line-296"></a><span>    </span><a name="local-8214565720323832197"><a href="System.IO.HVFS.html#vGetDirectoryContents"><span class="hs-identifier">vGetDirectoryContents</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">getDirectoryContents</span><span>
</span><a name="line-297"></a><span>    </span><a name="local-8214565720323832198"><a href="System.IO.HVFS.html#vDoesFileExist"><span class="hs-identifier">vDoesFileExist</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">doesFileExist</span><span>
</span><a name="line-298"></a><span>    </span><a name="local-8214565720323832199"><a href="System.IO.HVFS.html#vDoesDirectoryExist"><span class="hs-identifier">vDoesDirectoryExist</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">doesDirectoryExist</span><span>
</span><a name="line-299"></a><span>    </span><a name="local-8214565720323832201"><a href="System.IO.HVFS.html#vCreateDirectory"><span class="hs-identifier">vCreateDirectory</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">createDirectory</span><span>
</span><a name="line-300"></a><span>    </span><a name="local-8214565720323832202"><a href="System.IO.HVFS.html#vRemoveDirectory"><span class="hs-identifier">vRemoveDirectory</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">removeDirectory</span><span>
</span><a name="line-301"></a><span>    </span><a name="local-8214565720323832203"><a href="System.IO.HVFS.html#vRenameDirectory"><span class="hs-identifier">vRenameDirectory</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">renameDirectory</span><span>
</span><a name="line-302"></a><span>    </span><a name="local-8214565720323832204"><a href="System.IO.HVFS.html#vRemoveFile"><span class="hs-identifier">vRemoveFile</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">removeFile</span><span>
</span><a name="line-303"></a><span>    </span><a name="local-8214565720323832205"><a href="System.IO.HVFS.html#vRenameFile"><span class="hs-identifier">vRenameFile</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">renameFile</span><span>
</span><a name="line-304"></a><span>    </span><a name="local-8214565720323832206"><a href="System.IO.HVFS.html#vGetFileStatus"><span class="hs-identifier">vGetFileStatus</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679057388"><a href="#local-6989586621679057388"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">getFileStatus</span><span> </span><a href="#local-6989586621679057388"><span class="hs-identifier hs-var">fp</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="System.IO.HVFS.html#HVFSStatEncap"><span class="hs-identifier hs-var">HVFSStatEncap</span></a><span>
</span><a name="line-305"></a><span class="hs-cpp">#if !(defined(mingw32_HOST_OS) || defined(mingw32_TARGET_OS) || defined(__MINGW32__))</span><span>
</span><a name="line-306"></a><span>    </span><a name="local-8214565720323832207"><a href="System.IO.HVFS.html#vGetSymbolicLinkStatus"><span class="hs-identifier">vGetSymbolicLinkStatus</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679057389"><a href="#local-6989586621679057389"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">getSymbolicLinkStatus</span><span> </span><a href="#local-6989586621679057389"><span class="hs-identifier hs-var">fp</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="System.IO.HVFS.html#HVFSStatEncap"><span class="hs-identifier hs-var">HVFSStatEncap</span></a><span>
</span><a name="line-307"></a><span class="hs-cpp">#else</span><span>
</span><a name="line-308"></a><span>    </span><span class="hs-comment">-- No symlinks on Windows; just get the file status directly</span><span>
</span><a name="line-309"></a><span>    </span><span class="hs-identifier">vGetSymbolicLinkStatus</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">vGetFileStatus</span><span>
</span><a name="line-310"></a><span class="hs-cpp">#endif</span><span>
</span><a name="line-311"></a><span>
</span><a name="line-312"></a><span class="hs-cpp">#if MIN_VERSION_directory(1,2,0)</span><span>
</span><a name="line-313"></a><span>    </span><a name="local-8214565720323832208"><a href="System.IO.HVFS.html#vGetModificationTime"><span class="hs-identifier">vGetModificationTime</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679057390"><a href="#local-6989586621679057390"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">D</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">getModificationTime</span><span> </span><a href="#local-6989586621679057390"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679057391"><a href="#local-6989586621679057391"><span class="hs-identifier">modUTCTime</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">TOD</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier hs-var">toEnum</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">fromEnum</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">utcTimeToPOSIXSeconds</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679057391"><span class="hs-identifier hs-var">modUTCTime</span></a><span class="hs-special">)</span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span>
</span><a name="line-314"></a><span class="hs-cpp">#else</span><span>
</span><a name="line-315"></a><span>    </span><span class="hs-identifier">vGetModificationTime</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">D</span><span class="hs-operator">.</span><span class="hs-identifier">getModificationTime</span><span>
</span><a name="line-316"></a><span class="hs-cpp">#endif</span><span>
</span><a name="line-317"></a><span class="hs-cpp">#if !(defined(mingw32_HOST_OS) || defined(mingw32_TARGET_OS) || defined(__MINGW32__))</span><span>
</span><a name="line-318"></a><span>    </span><a name="local-8214565720323832210"><a href="System.IO.HVFS.html#vCreateSymbolicLink"><span class="hs-identifier">vCreateSymbolicLink</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">createSymbolicLink</span><span>
</span><a name="line-319"></a><span>    </span><a name="local-8214565720323832211"><a href="System.IO.HVFS.html#vReadSymbolicLink"><span class="hs-identifier">vReadSymbolicLink</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">readSymbolicLink</span><span>
</span><a name="line-320"></a><span>    </span><a name="local-8214565720323832212"><a href="System.IO.HVFS.html#vCreateLink"><span class="hs-identifier">vCreateLink</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">createLink</span><span>
</span><a name="line-321"></a><span class="hs-cpp">#else</span><span>
</span><a name="line-322"></a><span>    </span><span class="hs-identifier">vCreateSymbolicLink</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">fail</span><span> </span><span class="hs-string">&quot;Symbolic link creation not supported by Windows&quot;</span><span>
</span><a name="line-323"></a><span>    </span><span class="hs-identifier">vReadSymbolicLink</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">fail</span><span> </span><span class="hs-string">&quot;Symbolic link reading not supported by Widnows&quot;</span><span>
</span><a name="line-324"></a><span>    </span><span class="hs-identifier">vCreateLink</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">fail</span><span> </span><span class="hs-string">&quot;Hard link creation not supported by Windows&quot;</span><span>
</span><a name="line-325"></a><span class="hs-cpp">#endif</span><span>
</span><a name="line-326"></a><span>
</span><a name="line-327"></a><span class="hs-keyword">instance</span><span> </span><a href="System.IO.HVFS.html#HVFSOpenable"><span class="hs-identifier hs-type">HVFSOpenable</span></a><span> </span><a href="System.IO.HVFS.html#SystemFS"><span class="hs-identifier hs-type">SystemFS</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-328"></a><span>    </span><a name="local-8214565720323832190"><a href="System.IO.HVFS.html#vOpen"><span class="hs-identifier">vOpen</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679057384"><a href="#local-6989586621679057384"><span class="hs-identifier">fp</span></a></a><span> </span><a name="local-6989586621679057385"><a href="#local-6989586621679057385"><span class="hs-identifier">iomode</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">openFile</span><span> </span><a href="#local-6989586621679057384"><span class="hs-identifier hs-var">fp</span></a><span> </span><a href="#local-6989586621679057385"><span class="hs-identifier hs-var">iomode</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="System.IO.HVFS.html#HVFSOpenEncap"><span class="hs-identifier hs-var">HVFSOpenEncap</span></a><span>
</span><a name="line-329"></a><span>    </span><a name="local-8214565720323832193"><a href="System.IO.HVFS.html#vOpenBinaryFile"><span class="hs-identifier">vOpenBinaryFile</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679057386"><a href="#local-6989586621679057386"><span class="hs-identifier">fp</span></a></a><span> </span><a name="local-6989586621679057387"><a href="#local-6989586621679057387"><span class="hs-identifier">iomode</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">openBinaryFile</span><span> </span><a href="#local-6989586621679057386"><span class="hs-identifier hs-var">fp</span></a><span> </span><a href="#local-6989586621679057387"><span class="hs-identifier hs-var">iomode</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="System.IO.HVFS.html#HVFSOpenEncap"><span class="hs-identifier hs-var">HVFSOpenEncap</span></a><span>
</span><a name="line-330"></a></pre></body></html>
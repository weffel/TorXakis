<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.TextViaSockets</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Network.TextViaSockets.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">text-via-sockets-0.1.0.0: Send and receive text lines using sockets.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Damian Nadales 2017</td></tr><tr><th>License</th><td>BSD3 (see the file LICENSE)</td></tr><tr><th>Maintainer</th><td>Damian Nadales &lt;damian.nadales@gmail.com&gt;</td></tr><tr><th>Stability</th><td>provisional</td></tr><tr><th>Portability</th><td>non-portable (requires concurrency)</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Network.TextViaSockets</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Connect to a server</a></li><li><a href="#g:2">Start a server</a></li><li><a href="#g:3">Sending and receiving data</a></li><li><a href="#g:4">Closing the connection</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Simple line-based text communication via sockets.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Connection">Connection</a></li><li class="src short"><a href="#v:connectTo">connectTo</a> :: <a href="../network-2.6.3.5/Network-Socket.html#t:HostName">HostName</a> -&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:ServiceName">ServiceName</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-TextViaSockets.html#t:Connection">Connection</a></li><li class="src short"><a href="#v:acceptOn">acceptOn</a> :: <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:PortNumber">PortNumber</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-TextViaSockets.html#t:Connection">Connection</a></li><li class="src short"><a href="#v:acceptOnSocket">acceptOnSocket</a> :: <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-TextViaSockets.html#t:Connection">Connection</a></li><li class="src short"><a href="#v:getFreeSocket">getFreeSocket</a> :: <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a></li><li class="src short"><a href="#v:getLineFrom">getLineFrom</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../text-1.2.3.0/Data-Text.html#t:Text">Text</a></li><li class="src short"><a href="#v:receiveMsgs">receiveMsgs</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> [<a href="../text-1.2.3.0/Data-Text.html#t:Text">Text</a>]</li><li class="src short"><a href="#v:putLineTo">putLineTo</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../text-1.2.3.0/Data-Text.html#t:Text">Text</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:sendMsgs">sendMsgs</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; [<a href="../text-1.2.3.0/Data-Text.html#t:Text">Text</a>] -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:close">close</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Connection" class="def">Connection</a> <a href="src/Network.TextViaSockets.html#Connection" class="link">Source</a> <a href="#t:Connection" class="selflink">#</a></p><div class="doc"><p>A connection for sending and receiving <code>Text</code> lines.</p></div><div class="subs instances"><p id="control.i:Connection" class="caption collapser" onclick="toggleSection('i:Connection')">Instances</p><div id="section.i:Connection" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Connection:Eq:1" class="instance expander" onclick="toggleSection('i:id:Connection:Eq:1')"></span> <a href="../base-4.10.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-TextViaSockets.html#t:Connection">Connection</a></span> <a href="src/Network.TextViaSockets.html#line-68" class="link">Source</a> <a href="#t:Connection" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Connection:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Connection:Show:2" class="instance expander" onclick="toggleSection('i:id:Connection:Show:2')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-TextViaSockets.html#t:Connection">Connection</a></span> <a href="src/Network.TextViaSockets.html#line-70" class="link">Source</a> <a href="#t:Connection" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Connection:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-TextViaSockets.html#t:Connection">Connection</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:1">Connect to a server</h1><div class="top"><p class="src"><a id="v:connectTo" class="def">connectTo</a> :: <a href="../network-2.6.3.5/Network-Socket.html#t:HostName">HostName</a> -&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:ServiceName">ServiceName</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-TextViaSockets.html#t:Connection">Connection</a> <a href="src/Network.TextViaSockets.html#connectTo" class="link">Source</a> <a href="#v:connectTo" class="selflink">#</a></p><div class="doc"><p>Connect to the given host and service name (usually a port number).</p><p>If the connection cannot be established, this action will be retried using
 an exponential back-off strategy, until the maximum number of tries is
 reached.</p></div></div><h1 id="g:2">Start a server</h1><div class="top"><p class="src"><a id="v:acceptOn" class="def">acceptOn</a> :: <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:PortNumber">PortNumber</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-TextViaSockets.html#t:Connection">Connection</a> <a href="src/Network.TextViaSockets.html#acceptOn" class="link">Source</a> <a href="#v:acceptOn" class="selflink">#</a></p><div class="doc"><p>Accept byte-streams by serving on the given port number. This function
 will block until a client connects to the server.</p><p>If the connection cannot be established, this action will be retried using
 an exponential back-off strategy, until the maximum number of tries is
 reached.</p></div></div><div class="top"><p class="src"><a id="v:acceptOnSocket" class="def">acceptOnSocket</a> :: <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-TextViaSockets.html#t:Connection">Connection</a> <a href="src/Network.TextViaSockets.html#acceptOnSocket" class="link">Source</a> <a href="#v:acceptOnSocket" class="selflink">#</a></p><div class="doc"><p>Like <code>acceptOn</code> but it takes a bound socket as parameter.</p></div></div><div class="top"><p class="src"><a id="v:getFreeSocket" class="def">getFreeSocket</a> :: <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> <a href="src/Network.TextViaSockets.html#getFreeSocket" class="link">Source</a> <a href="#v:getFreeSocket" class="selflink">#</a></p><div class="doc"><p>Get a free socket from the operating system.</p></div></div><h1 id="g:3">Sending and receiving data</h1><div class="top"><p class="src"><a id="v:getLineFrom" class="def">getLineFrom</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../text-1.2.3.0/Data-Text.html#t:Text">Text</a> <a href="src/Network.TextViaSockets.html#getLineFrom" class="link">Source</a> <a href="#v:getLineFrom" class="selflink">#</a></p><div class="doc"><p>Read a text line from the given connection.</p><p>This function might throw an <code>BlockedIndefinitelyOnSTM</code> exception if the
 connection to the server is closed, so users of this function should check
 for this.</p></div></div><div class="top"><p class="src"><a id="v:receiveMsgs" class="def">receiveMsgs</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> [<a href="../text-1.2.3.0/Data-Text.html#t:Text">Text</a>] <a href="src/Network.TextViaSockets.html#receiveMsgs" class="link">Source</a> <a href="#v:receiveMsgs" class="selflink">#</a></p><div class="doc"><p>Receive <code>n</code> messages.</p></div></div><div class="top"><p class="src"><a id="v:putLineTo" class="def">putLineTo</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../text-1.2.3.0/Data-Text.html#t:Text">Text</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.TextViaSockets.html#putLineTo" class="link">Source</a> <a href="#v:putLineTo" class="selflink">#</a></p><div class="doc"><p>Put a text line onto the given connection.</p></div></div><div class="top"><p class="src"><a id="v:sendMsgs" class="def">sendMsgs</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; [<a href="../text-1.2.3.0/Data-Text.html#t:Text">Text</a>] -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.TextViaSockets.html#sendMsgs" class="link">Source</a> <a href="#v:sendMsgs" class="selflink">#</a></p><div class="doc"><p>Send a list of messages.</p></div></div><h1 id="g:4">Closing the connection</h1><div class="top"><p class="src"><a id="v:close" class="def">close</a> :: <a href="Network-TextViaSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.TextViaSockets.html#close" class="link">Source</a> <a href="#v:close" class="selflink">#</a></p><div class="doc"><p>Close the connection.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>